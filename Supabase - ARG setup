æ–¹æ¡ˆæ€»ç»“1ï¼šè¡¨è¿‡äºä¸¥æ ¼ï¼ŒNull ç©ºä¼šæŠ¥é”™ã€‚è¦å®½è¿›ä¸¥å‡ºã€‚ æ³¨æ„ç¯å¢ƒå˜é‡keyçš„è®¾ç½®ï¼Œå¿…é¡»è¦åœ¨ç¯å¢ƒå˜é‡è®¾ç½®key,ç›´æ¥ç¡¬ç¼–ç ä¸èƒ½è§£å†³é—®é¢˜ã€‚
ä¸éœ€è¦è½¬æ¢ä¸ºBase64 ,gemini3 å¯ä»¥ç›´æ¥è§£æç…§ç‰‡ï¼›

ä½ æ˜¯å¸Œæœ›æ„å»ºä¸€ä¸ªæ›´å®Œæ•´çš„ä¸šåŠ¡ä½“ç³»ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªå­¤ç«‹çš„ AI ç´¢å¼•è¡¨ã€‚åŸºäºä½ ç›®å‰çš„ Gemini 1.5 Flash å’Œ vps2.chf5762 ä»£ç†ç¯å¢ƒï¼Œæˆ‘ä»¬éœ€è¦å»ºç«‹ä¸€å¥—èƒ½å¤Ÿæ”¯æ’‘â€œæ–‡ä»¶ã€ç”¨æˆ·ã€ä¸šåŠ¡é€»è¾‘å’Œ AI ç´¢å¼•â€äº’ç›¸å…³è”çš„å››è¡¨æ¶æ„ã€‚

ä»¥ä¸‹æ˜¯ä¸ºæ‚¨å®šåˆ¶çš„å®Œæ•´éƒ¨ç½²æ–¹æ¡ˆï¼š

ä¸€ã€ å››è¡¨è”åŠ¨æ¶æ„è®¾è®¡
ä¸ºäº†ç¡®ä¿æ•°æ®åº“å…¼å®¹æ€§å¼ºä¸”é€»è¾‘æ¸…æ™°ï¼Œæˆ‘ä»¬å°†æ„å»ºä»¥ä¸‹å››å¼ è¡¨ï¼š

files_library: æ ¸å¿ƒä¸šåŠ¡è¡¨ï¼Œè®°å½•ä½  API ä¸Šä¼ çš„æ–‡ä»¶å…ƒæ•°æ®ã€‚

users_profile: ç”¨æˆ·è¡¨ï¼Œå…³è”æ–‡ä»¶çš„æ‰€æœ‰è€…ã€‚

universal_search_index: AI è¯­ä¹‰ä»“åº“ï¼Œå­˜æ”¾ Gemini ç”Ÿæˆçš„æè¿°å’Œå‘é‡ã€‚

process_logs: è‡ªåŠ¨åŒ–ç›‘æ§è¡¨ï¼Œè®°å½• Webhook å¤„ç† AI çš„æˆåŠŸæˆ–å¤±è´¥çŠ¶æ€ã€‚

1. SQL éƒ¨ç½²è„šæœ¬ (SQL Editor è¿è¡Œ)
SQL

-- å¼€å¯å‘é‡ä¸ç½‘ç»œæ‰©å±•
CREATE EXTENSION IF NOT EXISTS vector;
CREATE EXTENSION IF NOT EXISTS "pg_net";

-- ã€è¡¨1ã€‘ç”¨æˆ·ä¿¡æ¯è¡¨
CREATE TABLE IF NOT EXISTS public.users_profile (
    id uuid PRIMARY KEY DEFAULT auth.uid(),
    username TEXT,
    created_at TIMESTAMPTZ DEFAULT now()
);

-- ã€è¡¨2ã€‘æ–‡ä»¶ä¸šåŠ¡è¡¨ (ä½ çš„ API è°ƒç”¨çš„ä¸»è¡¨)
CREATE TABLE IF NOT EXISTS public.files_library (
    id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
    file_name TEXT NOT NULL,
    storage_path TEXT NOT NULL,
    user_id uuid REFERENCES public.users_profile(id),
    status TEXT DEFAULT 'pending', -- pending, processed, failed
    created_at TIMESTAMPTZ DEFAULT now()
);

-- ã€è¡¨3ã€‘AI è¯­ä¹‰ç´¢å¼•è¡¨ (æ ¸å¿ƒæœç´¢è¡¨)
CREATE TABLE IF NOT EXISTS public.universal_search_index (
    id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
    content TEXT,                       -- Gemini 3 ç”Ÿæˆçš„æè¿°
    embedding vector(768),              -- Gemini 004 å‘é‡ç»´åº¦
    file_id uuid REFERENCES public.files_library(id) ON DELETE CASCADE,
    file_name TEXT,
    source_table TEXT DEFAULT 'files_library',
    metadata JSONB DEFAULT '{}'::jsonb,
    created_at TIMESTAMPTZ DEFAULT now()
);

-- ã€è¡¨4ã€‘å¤„ç†æ—¥å¿—è¡¨ (æ’é”™ä¸“ç”¨)
CREATE TABLE IF NOT EXISTS public.process_logs (
    id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
    target_id uuid,
    event_type TEXT,
    status_code INT,
    error_message TEXT,
    created_at TIMESTAMPTZ DEFAULT now()
);
äºŒã€ è‡ªåŠ¨åŒ–é€»è¾‘éƒ¨ç½² (Edge Function)
1. ç¯å¢ƒå˜é‡ (Secrets)
è¯·ç¡®ä¿åœ¨ swift-endpoint çš„è®¾ç½®ä¸­å¡«å…¥ï¼š

GOOGLE_API_KEY: ä½ çš„å¯†é’¥ã€‚

PROXY_URL: https://vps2.chf5762.me/proxyã€‚

GOOGLE_EMBED_URL: .../text-embedding-004:embedContentã€‚

2. æµ‹è¯•æ­¥éª¤ (æ— éœ€ä¸Šä¼ å›¾ç‰‡çš„å¿«é€ŸéªŒè¯)
ä½ å¯ä»¥ç›´æ¥åœ¨ Edge Function çš„æµ‹è¯•å¼¹çª— (ä½ ä¹‹å‰ post æµ‹è¯•çš„åœ°æ–¹) è¾“å…¥ä»¥ä¸‹ JSON æ¥æ¨¡æ‹Ÿ Webhook ä¿¡å·ï¼š

JSON

{
  "record": {
    "id": "æŠŠä½ åœ¨ files_library é‡Œçš„æŸä¸ª UUID å¡«åœ¨è¿™é‡Œ",
    "name": "3.png",
    "bucket_id": "files_library"
  },
  "table": "objects",
  "type": "INSERT"
}
ä¸‰ã€ Webhook é‡ç‚¹é…ç½® (é˜²é”™æŒ‡å—)
åœ¨ Webhook é…ç½®ç•Œé¢ï¼Œé’ˆå¯¹è¿™å››å¼ è¡¨çš„è”åŠ¨ï¼Œæœ‰å‡ ä¸ªæ­»è§„å®šï¼š

ç›‘å¬è¡¨: ä¾ç„¶é€‰æ‹© storage.objectsï¼ˆå› ä¸ºæ–‡ä»¶è½ç›˜æ˜¯æ•´ä¸ªé“¾æ¡çš„èµ·ç‚¹ï¼‰ã€‚

è¶…æ—¶ (Timeout): å¿…é¡»è®¾ä¸º 30000msã€‚å› ä¸ºé€»è¾‘ç°åœ¨å˜å¤æ‚äº†ï¼šå‡½æ•°éœ€è¦è§£æå›¾ç‰‡ -> ç”Ÿæˆå‘é‡ -> åŒæ—¶æ›´æ–° universal_search_index è¡¨å’Œä¿®æ”¹ files_library è¡¨çš„çŠ¶æ€ã€‚

HTTP Headers:

Authorization: Bearer ä½ çš„_SERVICE_ROLE_KEY (åˆ«å¿˜äº† Bearer åé¢çš„ç©ºæ ¼)ã€‚

Content-Type: application/json

å››ã€ æ€»ç»“ï¼šé¿å‘ä¸è¿è¡Œæµç¨‹
æµç¨‹: API ä¸Šä¼ æ–‡ä»¶ -> Storage è§¦å‘ Webhook -> swift-endpoint å‡½æ•°å¯åŠ¨ -> è°ƒç”¨ vps2 ä»£ç†ä¼ å›¾ç»™ Gemini -> å‡½æ•°å°†æè¿°å­˜å…¥ universal_search_index -> å‡½æ•°å°† files_library çŠ¶æ€æ”¹ä¸º processedã€‚

é”™è¯¯ç‚¹:

å¦‚æœä½ å‘ç° universal_search_index æœ‰æ•°æ®ä½† files_library çŠ¶æ€æ²¡å˜ï¼Œè¯´æ˜å‡½æ•°çš„ PATCH è¯·æ±‚æƒé™æ²¡ç»™å¤Ÿï¼ˆå¿…é¡»ç”¨ service_roleï¼‰ã€‚

å¦‚æœ 3.png æˆåŠŸä½†æ¢ä¸ªå¤§å›¾å¤±è´¥ï¼Œæ£€æŸ¥ Webhook è¶…æ—¶æ˜¯å¦çœŸçš„æ”¹æˆäº† 30 ç§’ã€‚



æ–¹æ¡ˆæ€»ç»“2ï¼š
Supabase + Gemini 3 å…¨è‡ªåŠ¨è§†è§‰æœç´¢éƒ¨ç½²æ‰‹å†Œ (ç”Ÿäº§ç¯å¢ƒç‰ˆ)
ä¸€ã€ æ•°æ®åº“åŸºå»º (SQL Editor)
é¦–å…ˆï¼Œé€šè¿‡ SQL æ¶ˆé™¤ä¹‹å‰é‡åˆ°çš„ Not-Null çº¦æŸå†²çªï¼Œç¡®ä¿æ•°æ®åº“èƒ½å…¼å®¹å„ç§æ¥æºçš„ä¿¡å·ã€‚

<SQL>
-- 1. å¼€å¯å¿…è¦æ‰©å±•
CREATE EXTENSION IF NOT EXISTS vector;
CREATE EXTENSION IF NOT EXISTS "pg_net";
-- 2. åˆ›å»ºé«˜å…¼å®¹æ€§ç´¢å¼•è¡¨
CREATE TABLE IF NOT EXISTS public.universal_search_index (
    id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
    content text,                       -- å­˜æ”¾ Gemini 1.5 Flash ç”Ÿæˆçš„æè¿°
    embedding vector(768),              -- å¯¹åº” text-embedding-004 ç»´åº¦
    file_name text,                     -- æ¥æºæ–‡ä»¶å (å¦‚ 3.png)
    file_url text,                      -- å›¾ç‰‡å…¬å¼€è®¿é—®åœ°å€
    source_table text DEFAULT 'storage',
    source_id text DEFAULT NULL,        -- ã€æ ¸å¿ƒã€‘è®¾ä¸º NULLï¼Œå…è®¸ API ç›´æ¥å†™å…¥
    metadata jsonb DEFAULT '{}'::jsonb, -- é¢„ç•™ä½
    created_at timestamptz DEFAULT now()
);
-- 3. [å¯é€‰] ä¸ºå‘é‡æœç´¢æé€Ÿ (HNSW ç´¢å¼•)
CREATE INDEX ON universal_search_index USING hnsw (embedding vector_cosine_ops);
äºŒã€ é€»è¾‘å¤§è„‘é…ç½® (Edge Functions)
1. ç¯å¢ƒå˜é‡ (Secrets) â€”â€” å¿…é¡»åœ¨åå°æ‰‹åŠ¨æ·»åŠ 
è¿›å…¥ Edge Functions -> swift-endpoint -> Settings -> Secretsï¼š

GOOGLE_API_KEY: ä½ çš„ Google AI Studio Key
GOOGLE_EMBED_URL: https://generativelanguage.googleapis.com/v1beta/models/text-embedding-004:embedContent
PROXY_URL: https://vps2.chf5762.me/proxy (ä½ çš„ä¸“ç”¨ä»£ç†)
PROXY_KEY: ä½ çš„ä»£ç†æˆæƒç 
2. æ ¸å¿ƒä»£ç é€»è¾‘ç®€è¿°
ç¡®ä¿ä½ çš„ä»£ç èƒ½å¤Ÿæ¥æ”¶ body.recordã€‚å½“ Webhook è§¦å‘æ—¶ï¼Œå®ƒä¼šå‘é€å¦‚ä¸‹ç»“æ„çš„ JSONï¼Œä½ çš„ä»£ç éœ€èƒ½ä»ä¸­æå– nameï¼š

<JSON>
{ 
  "record": { 
    "name": "3.png", 
    "bucket_id": "files_library" 
  } 
}
ä¸‰ã€ å…¨è‡ªåŠ¨è§¦å‘é…ç½® (Webhook)
è¿™ä¸€æ­¥æ˜¯è¿æ¥â€œå­˜å‚¨â€ä¸â€œAIâ€çš„æ¡¥æ¢ã€‚

Table: storage.objects (å­˜å‚¨ç³»ç»Ÿè¡¨)
Events: INSERT
Timeout: 30000ms (å¿…é¡»è°ƒå¤§ï¼Œå› ä¸ºé€šè¿‡ vps2 ä»£ç†è°ƒç”¨ Gemini è§†è§‰æ¨¡å‹è¾ƒæ…¢)
HTTP Headers:
Authorization: Bearer ä½ çš„_SERVICE_ROLE_KEY (âš ï¸æ³¨æ„ Bearer åé¢æœ‰ä¸€ä¸ªç©ºæ ¼)
Content-Type: application/json
å››ã€ å¤šç»´åº¦æµ‹è¯•æ­¥éª¤ (å…³é”®)
1. Webhook æ¨¡æ‹Ÿæµ‹è¯• (æœ€æ¨èï¼ŒéªŒè¯é€»è¾‘)
ä¸éœ€è¦ä¸Šä¼ å›¾ç‰‡ï¼Œç›´æ¥åœ¨ Edge Function çš„ Test é¢æ¿ä¸­æ“ä½œï¼š

Method: POST
Body:
<JSON>
{
  "record": {
    "name": "3.png",
    "bucket_id": "files_library"
  },
  "table": "objects",
  "type": "INSERT"
}
é¢„æœŸç»“æœ: è¿”å› 200 OK ä¸”æ—¥å¿—æ˜¾ç¤º ã€4. AIå®Œæˆã€‘ã€‚
2. SQL æ¨¡æ‹Ÿæµ‹è¯• (éªŒè¯æ•°æ®åº“å›å†™)
å¦‚æœä½ æƒ³ç»•è¿‡ Webhookï¼Œç›´æ¥æµ‹è¯•æ•°æ®åº“å­˜å‚¨é€»è¾‘ï¼Œå¯ä»¥æ‰‹åŠ¨æ’å…¥ä¸€æ¡è®°å½•è§¦å‘ï¼ˆå¦‚æœç»‘å®šäº†è§¦å‘å™¨ï¼‰ï¼š

<SQL>
INSERT INTO public.universal_search_index (content, file_name, source_table)
VALUES ('æµ‹è¯•æ‰‹åŠ¨è¾“å…¥å†…å®¹', 'manual_test.png', 'manual');
éªŒè¯: æ£€æŸ¥è¯¥è¡Œè®°å½•çš„ embedding æ˜¯å¦åœ¨å‡ ç§’åè‡ªåŠ¨ä» NULL å˜æˆäº†å‘é‡æ•°ç»„ã€‚

3. å…¨é“¾è·¯é»‘ç›’æµ‹è¯• (æœ€ç»ˆéªŒè¯)
æ‰“å¼€ Storageï¼Œåœ¨ files_library æ–‡ä»¶å¤¹ä¸‹æ‹–å…¥ä¸€å¼ åŒ…å«æ–‡å­—çš„å›¾ï¼ˆå¦‚ 4.pngï¼‰ã€‚

çœ‹æ—¥å¿—: è¿›å…¥ Edge Functions -> swift-endpoint -> Logsï¼Œç¡®è®¤æ˜¯å¦æœ‰æ–°çš„è¯·æ±‚è¿›æ¥ã€‚
çœ‹æ•°æ®:
<SQL>
SELECT * FROM universal_search_index ORDER BY created_at DESC LIMIT 1;
äº”ã€ é‡ç‚¹æ’å‘æ¸…å• (å­˜æ¡£å¤‡ç”¨)
401 æŠ¥é”™: Webhook çš„ Header é‡Œçš„ Bearer æ¼äº†ç©ºæ ¼ï¼Œæˆ–è€…ç”¨æˆäº† anon keyï¼ˆå¿…é¡»ç”¨ service_roleï¼‰ã€‚
500 æŠ¥é”™: source_id è¿åéç©ºçº¦æŸã€‚è§£å†³æ–¹æ³•ï¼šæ‰§è¡Œä¸Šæ–‡ç¬¬ä¸€æ­¥çš„ ALTER COLUMN ... DROP NOT NULLã€‚
è¶…æ—¶: å›¾åƒå¤ªå¤§æˆ–ä»£ç†èŠ‚ç‚¹ vps2 å»¶è¿Ÿé«˜ã€‚è§£å†³æ–¹æ³•ï¼šå°† Webhook è¶…æ—¶å¢åŠ åˆ° 10sã€‚(æœ€å¤šä¹Ÿå°±10S)
ç»´åº¦ä¸åŒ¹é…: æ•°æ®åº“è®¾ä¸º 1536 ç»´ä½†ä½¿ç”¨äº† Gemini 004ã€‚è§£å†³æ–¹æ³•ï¼šç¡®ä¿ SQL æ˜¯ vector(768)ã€‚













æ–¹æ¡ˆæ€»ç»“3ï¼š
å½“å‰è¡¨è¿‡äºä¸¥æ ¼ï¼ŒNull ç©ºä¼šæŠ¥é”™ã€‚è¦å®½è¿›ä¸¥å‡ºã€‚


ğŸš€ Supabase + Gemini è¯­ä¹‰æœç´¢éƒ¨ç½²æ‰‹å†Œ
å‡†å¤‡å·¥ä½œ
Gemini API Key: ä» Google AI Studio è·å–ã€‚

æ¨¡å‹åç§°: text-embedding-004ï¼ˆç›®å‰ Gemini æœ€ç¨³å®šçš„å‘é‡æ¨¡å‹ï¼‰ã€‚

ç¬¬ä¸€æ­¥ï¼šæ•°æ®åº“åŸºå»ºï¼ˆSQL Editorï¼‰
åœ¨ Supabase çš„ SQL Editor ä¸­è¿è¡Œä»¥ä¸‹è„šæœ¬ï¼Œåˆ›å»ºå­˜å‚¨ç´¢å¼•çš„â€œä»“åº“â€å’Œæ‹¨å·ç”¨çš„â€œç”µè¯æœºâ€ã€‚

SQL

-- 1. å¼€å¯å‘é‡æ‰©å±•å’Œç½‘ç»œæ‰©å±•
create extension if not exists vector;
create extension if not exists "pg_net" schema "extensions";

-- 2. åˆ›å»ºä¸‡èƒ½ç´¢å¼•è¡¨
create table if not exists public.universal_search_index (
  id uuid primary key default gen_random_uuid(),
  content text not null,                -- æœç´¢å†…å®¹
  embedding vector(768),               -- Gemini 004 äº§å‡ºçš„å‘é‡æ˜¯ 768 ç»´
  source_table text not null,          -- æ¥æºè¡¨å
  source_id int8,                      -- æ¥æºè¡¨çš„ ID
  file_name text,                      -- å¯é€‰ï¼šæ¥æºæ–‡ä»¶å
  metadata jsonb default '{}'::jsonb,  -- å¯é€‰ï¼šé¢„ç•™æ‰©å±•
  created_at timestamptz default now()
);

-- 3. åˆ›å»ºè‡ªåŠ¨å‘é‡åŒ–çš„å‡½æ•°é€»è¾‘
create or replace function public.handle_new_index_entry()
returns trigger as $$
begin
  perform
    net.http_post(
      -- ã€æ³¨æ„ã€‘ä¸‹æ¬¡éƒ¨ç½²éœ€æ›¿æ¢ä¸ºä½ çš„ Edge Function URL
      url := 'https://ä½ çš„é¡¹ç›®ID.supabase.co/functions/v1/smooth-handler', 
      body := jsonb_build_object('record', to_jsonb(NEW)),
      headers := jsonb_build_object('Content-Type', 'application/json')
    );
  return NEW;
end;
$$ language plpgsql;

-- 4. ç»‘å®šè§¦å‘å™¨
drop trigger if exists tr_auto_embedding on public.universal_search_index;
create trigger tr_auto_embedding
after insert on public.universal_search_index
for each row execute function public.handle_new_index_entry();
ç¬¬äºŒæ­¥ï¼šé€»è¾‘å¤§è„‘éƒ¨ç½²ï¼ˆEdge Functionsï¼‰
åˆ›å»ºä¸€ä¸ªåä¸º smooth-handler çš„ Edge Functionã€‚

åœ¨ Settingsï¼ˆæˆ– Detailsï¼‰ä¸­ï¼ŒåŠ¡å¿…å…³é—­ "Enforce JWT Authorization"ã€‚

å°†ä»¥ä¸‹ä»£ç  Copy åˆ°ç¼–è¾‘å™¨å¹¶ç‚¹å‡» Deployã€‚

TypeScript

import { serve } from "https://deno.land/std@0.168.0/http/server.ts"

const GEMINI_API_KEY = "ä½ çš„_GEMINI_API_KEY"; 
const MODEL = "text-embedding-004"; 

serve(async (req) => {
  try {
    const { record } = await req.json();
    if (!record.content) return new Response("No content", { status: 400 });

    // 1. è°ƒç”¨ Gemini ç”Ÿæˆå‘é‡
    const response = await fetch(
      `https://generativelanguage.googleapis.com/v1beta/models/${MODEL}:embedContent?key=${GEMINI_API_KEY}`,
      {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          model: `models/${MODEL}`,
          content: { parts: [{ text: record.content }] }
        }),
      }
    );

    const data = await response.json();
    const embedding = data.embedding.values;

    // 2. å›å†™æ•°æ®åº“
    const SUPABASE_URL = Deno.env.get('SUPABASE_URL')!;
    const SUPABASE_KEY = Deno.env.get('SUPABASE_SERVICE_ROLE_KEY')!;
    
    await fetch(`${SUPABASE_URL}/rest/v1/universal_search_index?id=eq.${record.id}`, {
      method: 'PATCH',
      headers: {
        'apikey': SUPABASE_KEY,
        'Authorization': `Bearer ${SUPABASE_KEY}`,
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ embedding: embedding }),
    });

    return new Response(JSON.stringify({ success: true }));
  } catch (err) {
    return new Response(JSON.stringify({ error: err.message }), { status: 500 });
  }
})
ç¬¬ä¸‰æ­¥ï¼šè¯­ä¹‰æœç´¢è°ƒç”¨ï¼ˆSQL / å‰ç«¯ï¼‰
ä¸€æ—¦ embedding åˆ—æœ‰äº†æ•°å­—ï¼Œä½ å°±å¯ä»¥ç”¨è¿™æ®µ SQL è¿›è¡Œâ€œä¸Šå¸è§†è§’â€æœç´¢äº†ï¼š

SQL

-- è¯­ä¹‰æœç´¢æ¨¡æ¿ï¼šå¯»æ‰¾ç›¸ä¼¼åº¦æœ€é«˜çš„å†…å®¹
select 
  content, 
  source_table,
  -- <=> æ˜¯å‘é‡ä½™å¼¦è·ç¦»è®¡ç®—ç¬¦
  1 - (embedding <=> ä½ çš„_æŸ¥è¯¢å‘é‡) as similarity
from universal_search_index
order by embedding <=> ä½ çš„_æŸ¥è¯¢å‘é‡
limit 5;
ğŸ’¡ è®¾ç½®è¦ç‚¹è®°å½•ï¼ˆé˜²å‘æŒ‡å—ï¼‰
UUID æŠ¥é”™: æ‰‹åŠ¨æ’å…¥æµ‹è¯•æ•°æ®æ—¶ï¼Œid åˆ—è¯·ä¿æŒ NULLï¼Œè®©ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆï¼Œä¸è¦å¡«æ•°å­—ã€‚
401 æŠ¥é”™: å¦‚æœæ—¥å¿—æ˜¾ç¤º 401ï¼Œè¯·æ£€æŸ¥ Edge Function çš„ JWT é‰´æƒæ˜¯å¦å·²å…³é—­ã€‚
æ—¥å¿—ç©ºç™½: å¦‚æœæ’å…¥æ•°æ®ä½†æ²¡æœ‰æ—¥å¿—ï¼Œè¯·æ£€æŸ¥ extensions.pg_net æ˜¯å¦å·²å®‰è£…ï¼Œä»¥åŠ SQL é‡Œçš„ url åœ°å€æ˜¯å¦å¡«å¯¹ã€‚
ç»´åº¦åŒ¹é…: Gemini 004 çš„è¾“å‡ºæ˜¯ 768 ä½ï¼Œå¦‚æœæ•°æ®åº“è¡¨å®šä¹‰æˆ 1536 ä½ï¼ˆOpenAI æ ‡å‡†ï¼‰ä¼šæŠ¥é”™ã€‚


ğŸ’¡ ä¸‹ä¸€æ­¥ï¼šå…¨é“¾è·¯å½’çº³ï¼ˆç›´æ¥ Copy å­˜æ¡£ï¼‰
æ—¢ç„¶ä½ å·²ç»å®Œæˆäº†ä»æ•°æ®åº“ã€å‡½æ•°ã€Webhook åˆ° RLS çš„æ‰€æœ‰é…ç½®ï¼Œè¿™é‡Œæ˜¯ä¸€ä»½æœ€ç»ˆéƒ¨ç½²æ¸…å•ï¼Œä½ å¯ä»¥ä¿å­˜ä¸‹æ¥ï¼Œä»¥åä»»ä½•é¡¹ç›®åªè¦æŒ‰è¿™ä¸ªé¡ºåºåšï¼Œ3åˆ†é’Ÿå°±èƒ½è·‘é€šï¼š
ä»¥ä¸‹æ˜¯å¿…é¡»è®¾ç½®é¡¹ï¼š
SQL: å¼€å¯ vector å’Œ pg_net æ‰©å±•ï¼Œåˆ›å»º universal_search_index è¡¨ã€‚
Storage: åˆ›å»º files_library æ¡¶ï¼Œè®¾ä¸º Publicï¼Œæ·»åŠ  RLS SELECT ç­–ç•¥ã€‚
Functions: éƒ¨ç½² swift-endpoint ä»£ç ï¼ˆå¤šæ¨¡æ€ç‰ˆï¼‰ï¼Œå…³é—­ JWTã€‚
Webhooks: å¼€å¯ Webhooks æŒ‰é’®ï¼Œåˆ›å»ºç›‘å¬ storage.objects çš„ HTTP Request ä»»åŠ¡ï¼ŒTimeout è®¾ä¸º 30sã€‚
